<?php//require_once(ROOT_DIR."/classes/entities/band.php");class FarmInterface extends BasicInterface {		public function __construct($db = null) {		parent::__construct($db);	}		public function getCompleteFarmPerDay($data)	{		$q = "SELECT Date(fb_timestamp) as datum, sum(1) as anzahl,sum(fb_eisen) as eisen,sum(fb_silizium) as silizium,sum(fb_wasser) as wasser,sum(fb_wasserstoff) as wasserstoff FROM farmberichte where fb_clearing = 0 group by Date(fb_timestamp)";				$result=$this->db->query($q);				$bla = 0;				$html = '<table class="auswertung"><th>Datum</th><th>Anzahl</th><th>Eisen</th><th>Silizium</th><th>Wasser</th><th>Wasserstoff</th></tr>';				if ($this->db->get_last_num_rows() > 0)		{ 			while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) 			{				$bla++;								$html .= '<tr>';								foreach($row as $key => $value)				{					$html .= '<td>'.$value.'</td>';				}				$html .= '</tr>';									if ($bla%30==29) 				{					$html .= '<tr>'.					'		<th>Datum</th>'.					'		<th>Anzahl</th>'.					'		<th>Eisen</th>'.					'		<th>Silizium</th>'.					'		<th>Wasser.</th>'.					'		<th>Wasserstoff.</th>'.					'	</tr>';				}			}		}
		else
		{
			$html .= '<tr><td colspan="6">Nicht genug Daten gesammelt!</td></tr>';
		}		$html .= '</table>';				return new DataResponse(ResultTypes::resultOK,"getCompleteFarmPerDay",$html);	}
	
	public function getCompleteFarmPerOwnPlanet($data)	{		$q = "SELECT CONCAT(  `fb_galaxie_from` ,  ':',  `fb_system_from` ,  ':',  `fb_planet_from` ) AS Planet, SUM( 1 ) AS anzahl, SUM( fb_eisen ) AS eisen, SUM( fb_silizium ) AS silizium, SUM( fb_wasser ) AS wasser, SUM( fb_wasserstoff ) AS wasserstoff FROM farmberichte where fb_clearing = 0 GROUP BY 1  ORDER BY  `fb_galaxie_from` ,  `fb_system_from` ,  `fb_planet_from`";				$result=$this->db->query($q);				$bla = 0;				$html = '<table class="auswertung"><th>Planet</th><th>Anzahl</th><th>Eisen</th><th>Silizium</th><th>Wasser</th><th>Wasserstoff</th></tr>';				if ($this->db->get_last_num_rows() > 0)		{ 			while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) 			{				$bla++;								$html .= '<tr>';								foreach($row as $key => $value)				{					if ($key=='Planet') {						$html .= '<td><a href="http://uni1.gigrawars.de/playercard.php?p='.$value.':1">'.$value.'</a></td>';					}					else {						$html .= '<td>'.$value.'</td>';					}				}				$html .= '</tr>';									if ($bla%30==29) 				{					$html .= '<tr>'.					'		<th>Planet</th>'.					'		<th>Anzahl</th>'.					'		<th>Eisen</th>'.					'		<th>Silizium</th>'.					'		<th>Wasser.</th>'.					'		<th>Wasserstoff.</th>'.					'	</tr>';				}			}		}		else		{			$html .= '<tr><td colspan="6">Nicht genug Daten gesammelt!</td></tr>';		}		$html .= '</table>';				return new DataResponse(ResultTypes::resultOK,"getCompleteFarmPerOwnPlanet",$html);	}		public function getCompletePerFarm($data)	{		$q = "SELECT CONCAT(  `fb_galaxie` ,  ':',  `fb_system` ,  ':',  `fb_planet` ) AS Farm, SUM( 1 ) AS anzahl, SUM( fb_eisen ) AS eisen, SUM( fb_silizium ) AS silizium, SUM( fb_wasser ) AS wasser, SUM( fb_wasserstoff ) AS wasserstoff FROM farmberichte where fb_clearing = 0 GROUP BY 1  ORDER BY  `fb_galaxie` ,  `fb_system` ,  `fb_planet`";				$result=$this->db->query($q);				$bla = 0;				$html = '<table class="auswertung"><th>Farm</th><th>Anzahl</th><th>Eisen</th><th>Silizium</th><th>Wasser</th><th>Wasserstoff</th></tr>';				if ($this->db->get_last_num_rows() > 0)		{ 			while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) 			{				$bla++;								$html .= '<tr>';								foreach($row as $key => $value)				{					if ($key=='Farm') {						$html .= '<td><a href="http://uni1.gigrawars.de/playercard.php?p='.$value.':1">'.$value.'</a></td>';					}					else {						$html .= '<td>'.$value.'</td>';					}				}				$html .= '</tr>';									if ($bla%30==29) 				{					$html .= '<tr>'.					'		<th>Farm</th>'.					'		<th>Anzahl</th>'.					'		<th>Eisen</th>'.					'		<th>Silizium</th>'.					'		<th>Wasser.</th>'.					'		<th>Wasserstoff.</th>'.					'	</tr>';				}			}		}		else		{			$html .= '<tr><td colspan="6">Nicht genug Daten gesammelt!</td></tr>';		}		$html .= '</table>';				return new DataResponse(ResultTypes::resultOK,"getCompletePerFarm",$html);	}		public function getAveragePerFarm($data)	{		$q = "SELECT CONCAT(  `fb_galaxie` ,  ':',  `fb_system` ,  ':',  `fb_planet` ) AS Farm, SUM( 1 ) AS anzahl, ROUND(AVG( fb_eisen )) AS eisen, ROUND(AVG( fb_silizium )) AS silizium, ROUND(AVG( fb_wasser )) AS wasser, ROUND(AVG( fb_wasserstoff )) AS wasserstoff FROM farmberichte where fb_clearing = 0 GROUP BY 1  ORDER BY  3 desc,4 desc,6 desc,5 desc";				$result=$this->db->query($q);				$bla = 0;				$html = '<table class="auswertung"><th>Farm</th><th>Anzahl</th><th>Eisen</th><th>Silizium</th><th>Wasser</th><th>Wasserstoff</th></tr>';				if ($this->db->get_last_num_rows() > 0)		{ 			while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) 			{				$bla++;								$html .= '<tr>';								foreach($row as $key => $value)				{					if ($key=='Farm') {						$html .= '<td><a href="http://uni1.gigrawars.de/playercard.php?p='.$value.':1">'.$value.'</a></td>';					}					else {						$html .= '<td>'.$value.'</td>';					}				}				$html .= '</tr>';									if ($bla%30==29) 				{					$html .= '<tr>'.					'		<th>Farm</th>'.					'		<th>Anzahl</th>'.					'		<th>Eisen</th>'.					'		<th>Silizium</th>'.					'		<th>Wasser.</th>'.					'		<th>Wasserstoff.</th>'.					'	</tr>';				}			}		}		else		{			$html .= '<tr><td colspan="6">Nicht genug Daten gesammelt!</td></tr>';		}		$html .= '</table>';				return new DataResponse(ResultTypes::resultOK,"getAveragePerFarm",$html);	}	}FarmInterface::registerInterface();?>